{{ if .install_packages -}}

{{ if ne .osid "windows" -}}
#!/usr/bin/env bash
{{ end -}}

# Install various packages
{{ if eq .osid "linux-debian" -}}
sed -i 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/g' /etc/locale.gen # needed for debian
echo 'LANG=en_US.UTF-8' > /etc/default/locale
{{ end -}}

{{ if or (eq .osid "linux-ubuntu") (eq .osid "linux-debian")  -}}
sudo apt install -y locales
sudo locale-gen en_US.UTF-8
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

sudo apt install -y ripgrep htop silversearcher-ag fd-find git zsh tig
curl -sS https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh | bash

ln -s $(which fdfind) ~/.local/bin/fd

{{ else if eq .osid "darwin" -}}
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
brew install ripgrep htop the_silver_searcher fd cmake git ninja zsh zoxide tig
{{ end -}}

{{ if ne .osid "windows" -}}
# Install oh my zsh
ZSH=
sh -c "$(curl -fsSL https://install.ohmyz.sh/)" "" --unattended
touch ~/.zshrc

{{ if eq .chezmoi.os "linux" -}}
sed -i 's/ZSH_THEME=\"robbyrussell\"/ZSH_THEME=\"bira\"/g' ~/.zshrc
{{ else if eq .osid "darwin" -}}
sed -i.bak 's/ZSH_THEME=\"robbyrussell\"/ZSH_THEME=\"bira\"/g' ~/.zshrc
{{ end -}}

# End of not windows
{{ end -}}

# end of install_packages
{{ end -}}
