{{- if .install_packages -}}

{{- if eq .chezmoi.os "windows" }}

# Inspiration
# https://github.com/nandalopes/dotfiles/blob/friends/root/.chezmoidata/tmux.yaml
# https://github.com/spf13/dotfiles/blob/main/run_once_before_install-packages-windows.bat.tmpl
# https://github.com/twpayne/dotfiles/blob/master/home/.chezmoiscripts/windows/run_onchange_remove-bloat.ps1

# https://github.com/topics/chezmoi?l=powershell
# https://github.com/TsekNet/dotfiles/blob/main/README.md this is good
# https://github.com/jwnmulder/dotfiles/blob/main/README.md
# https://github.com/LeoCalbi/dotfiles/blob/master/home/.chezmoiscripts/before/run_once_before_02_system_setup.ps1

#echo "Installing/upgrading developer tools"

# Refresh path
# $env:Path = [System.Environment]::GetEnvironmentVariable("Path","User"),[System.Environment]::GetEnvironmentVariable("Path","Machine") -join ";"

# $IsElevated = 'true' -eq (gsudo status IsElevated)

#if ($IsElevated -eq $false) {
#  Write-Warning "This script requires local admin privileges. Elevating..."
#  gsudo "& '$($MyInvocation.MyCommand.Source)'" $args
#  if ($LastExitCode -eq 999 ) {
#    Write-error 'Failed to elevate.'
#  }
#  return
#}

# upgrade choco .exe and add choco to PATH
#powershell.exe Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))

$env:Path += ';$env:ALLUSERSPROFILE\chocolatey\bin'

#choco upgrade chocolatey
#choco feature enable -n allowGlobalConfirmation

# dev tools


# end of windows
{{- end -}}


# end of install_packages
{{- end -}}

